--BattleDefine.txt
--@breif 战斗预定义
--@data 2018/3/10

--@brief c#引用
local CSVector3 = CS.UnityEngine.Vector3
local CSLog = CS.GameTool.Log

--@breif 战斗预定义
BattleDefine = {

	CommandStep = 3,		--驱动帧步伐

	PlayerSpeed = 0.05,		--移动速度
	PlayerRadius = 1,		--碰撞半径
}

--@brief 方向预定义
BattleDir = {
	None = 0,	--停止
	Up = 1,		
	UpLeft = 2,
	Left = 3,

	DownLeft = 4,
	Down = 5,
	DownRight = 6,

	Right = 7,
	UpRight = 8,
}

BattleDirDefine = {
	UpLeft = CSVector3(-1, 0, 1),
	UpRight = CSVector3(1, 0, 1),
	DownLeft = CSVector3(-1, 0, -1),
	DownRight = CSVector3(1, 0, -1),
}
--@brief 获得对应方向的方向向量
function BattleDirDefine:GetPos(dir)
	if dir == BattleDir.Up then
		return CSVector3.forward

	elseif dir == BattleDir.UpLeft then
		return BattleDirDefine.UpLeft

	elseif dir == BattleDir.Left then
		return CSVector3.left

	elseif dir == BattleDir.DownLeft then
		return BattleDirDefine.DownLeft

	elseif dir == BattleDir.Down then
		return CSVector3.back

	elseif dir == BattleDir.DownRight then
		return BattleDirDefine.DownRight

	elseif dir == BattleDir.Right then
		return CSVector3.right

	elseif dir == BattleDir.UpRight then
		return BattleDirDefine.UpRight
	end
	return CSVector3.zero
end
--@brief 获得对应方向的方向向量列表
function BattleDirDefine:GetList(dir)
	if not BattleDirDefine.m_tList then
		BattleDirDefine.m_tList = {}
		
		BattleDirDefine[BattleDir.Up] = {CSVector3.forward, CSVector3.right}
		BattleDirDefine[BattleDir.DOWN] = {CSVector3.back, CSVector3.left}
		BattleDirDefine[BattleDir.LEFT] = {CSVector3.left, CSVector3.forward}
		BattleDirDefine[BattleDir.RIGHT] = {CSVector3.right, CSVector3.back}

		BattleDirDefine[BattleDir.UpLeft] = {BattleDirDefine.UpLeft, CSVector3.forward, CSVector3.left}
		BattleDirDefine[BattleDir.UpRight] = {BattleDirDefine.UpRight, CSVector3.forward, CSVector3.right}
		BattleDirDefine[BattleDir.DownLeft] = {BattleDirDefine.DownLeft, CSVector3.back, CSVector3.left}
		BattleDirDefine[BattleDir.DownRight] = {BattleDirDefine.DownRight, CSVector3.back, CSVector3.right}
	end

	return BattleDirDefine[dir] or {}
end


--————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
--*******************************************************全局事件 Begin*************************************************************
--————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
--@brief 全局战斗事件
GBattleEvent = {
	BattleDispatcher = nil,		--事件发送器
}


--@breif 网络事件
BATTLE_EVENT = {
	ADD_CHARACTER = "BATTLE_EVENT_ADD_CHARACTER", 	--添加玩家
	REMOVE_CHARACTER = "BATTLE_EVENT_REMOVE_CHARACTER",		--移除玩家
}
--@breif 获取战斗事件管理器
function GBattleEvent:GetBattleDispatcher()
	if GBattleEvent.BattleDispatcher == nil then 
		GBattleEvent.BattleDispatcher = EventDispatcher:Create() 
	end
	return GBattleEvent.BattleDispatcher
end

--@breif 清理战斗事件管理器（战斗退出清理）
function GBattleEvent:RemoveBattleDispatcher()
	if GBattleEvent.BattleDispatcher == nil then 
		GBattleEvent.BattleDispatcher:RemoveEvent()
	end
	GBattleEvent.BattleDispatcher = nil
end

--@brief 战斗对象结构
function GBattleEvent:GetBattleData(battleId,careerType,pos)
	local data = {}
	data.battleId = battleId or 1
	data.careerType = careerType or CareerType.FashShi
	data.pos = pos or CSVector3(100,0,100)

	return data
end

--————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
--*******************************************************全局事件 End***************************************************************
--————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————————
